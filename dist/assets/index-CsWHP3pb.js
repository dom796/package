(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const y of c.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&l(y)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();const r={steps:document.querySelectorAll(".step-content"),sidebarSteps:document.querySelectorAll(".sidebar-step"),planBoxes:document.querySelectorAll(".plan-box"),addonRows:document.querySelectorAll(".addon-row"),billingToggle:document.getElementById("billing-toggle"),currencySelector:document.getElementById("currency-selector"),monthlyLabel:document.getElementById("monthly-label"),yearlyLabel:document.getElementById("yearly-label"),summaryBox:document.querySelector(".summary-box"),totalRow:document.querySelector(".total-row"),inputs:{name:document.getElementById("name"),email:document.getElementById("email"),phone:document.getElementById("phone")},container:document.querySelector(".step-container"),settingsCog:document.getElementById("settings-cog"),settingsModal:document.getElementById("settings-modal"),testModeToggle:document.getElementById("test-mode-toggle"),testErrorBtn:document.getElementById("test-error-btn"),resetBtn:document.getElementById("reset-btn"),mobileStepIndicator:document.getElementById("mobile-step-indicator")},g={baseCurrency:"GBP",exchangeRates:{GBP:1},currencySettings:{GBP:{locale:"en-GB",currency:"GBP"},EUR:{locale:"de-DE",currency:"EUR"},USD:{locale:"en-US",currency:"USD"}}},L=async(e,d)=>{try{const i=await fetch(`https://api.frankfurter.app/latest?from=${g.baseCurrency}&to=EUR,USD`);if(!i.ok)throw new Error("Network response was not ok");const l=await i.json();l&&l.rates&&(g.exchangeRates={...g.exchangeRates,...l.rates},e&&e())}catch(i){console.error("Failed to fetch exchange rates:",i),d&&d(i)}},h=(e,d,i,l)=>{const o=l[d][e],c=g.exchangeRates[i];return c===void 0?null:o*c},p=(e,d,i,l=!0)=>{if(e===null)return"Loading...";const o=g.currencySettings[i],y=new Intl.NumberFormat(o.locale,{style:"currency",currency:o.currency,maximumFractionDigits:0,minimumFractionDigits:0}).format(e);return l?`${y}/${d==="monthly"?"mo":"yr"}`:y};document.addEventListener("DOMContentLoaded",()=>{const e={currentStep:0,formData:{name:"",email:"",phone:"",plan:"Arcade",billing:"monthly",currency:"GBP",addons:[{name:"Online service"},{name:"Larger storage"}]}},d={basePrices:{monthly:{Arcade:9,Advanced:12,Pro:15,"Online service":1,"Larger storage":2,"Customizable Profile":2},yearly:{Arcade:90,Advanced:120,Pro:150,"Online service":10,"Larger storage":20,"Customizable Profile":20}}},i=()=>{if(r.steps.forEach((t,n)=>t.classList.toggle("hidden",n!==e.currentStep)),r.sidebarSteps.forEach((t,n)=>t.classList.toggle("active",n===e.currentStep)),r.mobileStepIndicator){const t=e.currentStep+1;r.mobileStepIndicator.querySelector("p").textContent=`STEP ${t>4?4:t}`,r.mobileStepIndicator.classList.toggle("hidden",e.currentStep>=4)}},l=()=>{r.planBoxes.forEach(t=>{const n=t.querySelector("p.has-text-weight-bold").textContent;t.classList.toggle("is-selected",n===e.formData.plan);const a=t.querySelector("p.has-text-grey"),u=h(n,e.formData.billing,e.formData.currency,d.basePrices);a.textContent=p(u,e.formData.billing,e.formData.currency);let s=t.querySelector(".free-label");e.formData.billing==="yearly"?s||(s=document.createElement("p"),s.className="is-size-7 has-text-link free-label",s.textContent="2 months free",t.querySelector("div").appendChild(s)):s&&s.remove()})},o=()=>{r.addonRows.forEach(t=>{const n=t.querySelector("p.has-text-weight-bold").textContent,a=t.querySelector('input[type="checkbox"]'),u=t.querySelector("p.has-text-primary"),s=h(n,e.formData.billing,e.formData.currency,d.basePrices);u.textContent=`+${p(s,e.formData.billing,e.formData.currency)}`;const m=e.formData.addons.some(f=>f.name===n);t.classList.toggle("is-selected",m),a.checked=m})},c=()=>{const{plan:t,billing:n,addons:a}=e.formData,u=n==="monthly"?"Monthly":"Yearly",s=h(t,e.formData.billing,e.formData.currency,d.basePrices);let m=s,f=`
            <div class="is-flex is-justify-content-space-between is-align-items-center mb-4 pb-4" style="border-bottom: 1px solid #dbdbdb;">
                <div>
                    <p class="has-text-weight-bold">${t} (${u})</p>
                    <a href="#" class="is-size-7 has-text-grey" style="text-decoration: underline;" id="change-plan">Change</a>
                </div>
                <p class="has-text-weight-bold">${p(s,e.formData.billing,e.formData.currency)}</p>
            </div>
        `;a.forEach(D=>{const x=h(D.name,e.formData.billing,e.formData.currency,d.basePrices);m!==null&&x!==null?m+=x:m=null,f+=`
                <div class="is-flex is-justify-content-space-between mb-2">
                    <p class="has-text-grey is-size-7">${D.name}</p>
                    <p class="is-size-7">+${p(x,e.formData.billing,e.formData.currency)}</p>
                </div>
            `}),r.summaryBox.innerHTML=f;const E=n==="monthly"?"Total (per month)":"Total (per year)";r.totalRow.innerHTML=`
            <p class="has-text-grey is-size-7">${E}</p>
            <p class="has-text-primary is-size-4 has-text-weight-bold">+${p(m,e.formData.billing,e.formData.currency)}</p>
        `},y=()=>{let t=!0;return Object.entries(r.inputs).forEach(([n,a])=>{a.classList.remove("is-danger");const s=a.closest(".field").querySelector(".help.is-danger");s&&s.remove();const m=a.value.trim();m?n==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)&&(b(a,"The email address is not formatted correctly"),t=!1):(b(a,"This field is required"),t=!1)}),t&&(e.formData.name=r.inputs.name.value,e.formData.email=r.inputs.email.value,e.formData.phone=r.inputs.phone.value),t},b=(t,n)=>{t.classList.add("is-danger");const a=document.createElement("p");a.className="help is-danger",a.textContent=n,t.closest(".field").appendChild(a)};r.container.addEventListener("click",t=>{const n=t.target;if(n.matches(".button.primary, .button.is-primary")){if(e.currentStep===0&&!y())return;e.currentStep<r.steps.length-1&&(n.textContent.trim()==="Confirm"?e.currentStep=4:e.currentStep++,i(),e.currentStep===2&&o(),e.currentStep===3&&c());return}if(n.matches(".button.is-text")){e.currentStep>0&&(e.currentStep--,i());return}if(n.id==="change-plan"){t.preventDefault(),e.currentStep=1,i();return}const a=n.closest(".plan-box");if(a){e.formData.plan=a.querySelector("p.has-text-weight-bold").textContent,l();return}const u=n.closest(".addon-row");if(u){const s=u.querySelector('input[type="checkbox"]');n!==s&&(s.checked=!s.checked);const m=u.querySelector("p.has-text-weight-bold").textContent;s.checked?e.formData.addons.some(f=>f.name===m)||e.formData.addons.push({name:m}):e.formData.addons=e.formData.addons.filter(f=>f.name!==m),o()}}),r.billingToggle.addEventListener("change",()=>{e.formData.billing=r.billingToggle.checked?"yearly":"monthly";const t=e.formData.billing==="yearly";r.yearlyLabel.classList.toggle("has-text-weight-bold",t),r.yearlyLabel.classList.toggle("has-text-grey",!t),r.monthlyLabel.classList.toggle("has-text-weight-bold",!t),r.monthlyLabel.classList.toggle("has-text-grey",t),l(),o()}),r.currencySelector.addEventListener("change",()=>{e.formData.currency=r.currencySelector.value,e.formData.currency!==g.baseCurrency?L(()=>{l(),o(),e.currentStep===3&&c()},()=>{e.formData.currency="GBP",r.currencySelector.value="GBP",l(),o(),e.currentStep===3&&c();const t=r.currencySelector.closest(".control"),n=document.createElement("div");n.className="currency-tooltip",n.textContent="Sorry, currency unavailable.",t.appendChild(n),setTimeout(()=>{n.remove(),Array.from(r.currencySelector.options).forEach(a=>{a.value!=="GBP"&&(a.disabled=!0)})},3e3)}):(l(),o())});const S=()=>{r.settingsModal.classList.toggle("is-active")};r.settingsCog.addEventListener("click",S),r.settingsModal.querySelector(".modal-background").addEventListener("click",S),r.settingsModal.querySelector(".delete").addEventListener("click",S),r.testModeToggle.addEventListener("change",()=>{document.body.classList.toggle("test-mode-enabled",r.testModeToggle.checked)}),r.testErrorBtn.addEventListener("click",()=>{const t=g.baseCurrency;g.baseCurrency="INVALID",L(()=>{},()=>{}).finally(()=>{g.baseCurrency=t})}),r.resetBtn.addEventListener("click",()=>{window.location.reload()}),l(),o(),i()});
