(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))m(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const y of i.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&m(y)}).observe(document,{childList:!0,subtree:!0});function d(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(a){if(a.ep)return;a.ep=!0;const i=d(a);fetch(a.href,i)}})();const e={steps:document.querySelectorAll(".step-content"),sidebarSteps:document.querySelectorAll(".sidebar-step"),planBoxes:document.querySelectorAll(".plan-box"),addonRows:document.querySelectorAll(".addon-row"),billingToggle:document.getElementById("billing-toggle"),currencySelector:document.getElementById("currency-selector"),monthlyLabel:document.getElementById("monthly-label"),yearlyLabel:document.getElementById("yearly-label"),summaryBox:document.querySelector(".summary-box"),totalRow:document.querySelector(".total-row"),inputs:{name:document.getElementById("name"),email:document.getElementById("email"),phone:document.getElementById("phone")},container:document.querySelector(".step-container"),settingsCog:document.getElementById("settings-cog"),settingsModal:document.getElementById("settings-modal"),modalBackground:document.querySelector("#settings-modal .modal-background"),modalDelete:document.querySelector("#settings-modal .delete"),testModeToggle:document.getElementById("test-mode-toggle"),testErrorBtn:document.getElementById("test-error-btn"),resetBtn:document.getElementById("reset-btn"),mobileStepIndicator:document.getElementById("mobile-step-indicator"),mobileStepIndicatorText:document.querySelector("#mobile-step-indicator p"),get:(t,s)=>t.querySelector(s),closest:(t,s)=>t.closest(s),create:t=>document.createElement(t),toggleBodyClass:(t,s)=>document.body.classList.toggle(t,s)},g={baseCurrency:"GBP",exchangeRates:{GBP:1},currencySettings:{GBP:{locale:"en-GB",currency:"GBP"},EUR:{locale:"de-DE",currency:"EUR"},USD:{locale:"en-US",currency:"USD"}}},E=async(t,s)=>{try{const d=await fetch(`https://api.frankfurter.app/latest?from=${g.baseCurrency}&to=EUR,USD`);if(!d.ok){const a=new Error("Network response was not ok");console.error("Failed to fetch exchange rates:",a),s&&s(a);return}const m=await d.json();m&&m.rates&&(g.exchangeRates={...g.exchangeRates,...m.rates},t&&t())}catch(d){console.error("Failed to fetch exchange rates:",d),s&&s(d)}},x=(t,s,d,m)=>{const a=m[s][t],i=g.exchangeRates[d];return i===void 0?null:a*i},b=(t,s,d,m=!0)=>{if(t===null)return"Loading...";const a=g.currencySettings[d],y=new Intl.NumberFormat(a.locale,{style:"currency",currency:a.currency,maximumFractionDigits:0,minimumFractionDigits:0}).format(t);return m?`${y}/${s==="monthly"?"mo":"yr"}`:y};document.addEventListener("DOMContentLoaded",()=>{const t=new Proxy({currentStep:0,formData:{name:"",email:"",phone:"",plan:"Arcade",billing:"monthly",currency:"GBP",addons:[{name:"Online service"},{name:"Larger storage"},{name:"Customizable Profile"}]}},{set(r,n,o){return r[n]=o,s(),!0}}),s=()=>{a(),i(),y(),t.currentStep===3&&v()},d={basePrices:{monthly:{Arcade:9,Advanced:12,Pro:15,"Online service":1,"Larger storage":2,"Customizable Profile":2},yearly:{Arcade:90,Advanced:120,Pro:150,"Online service":10,"Larger storage":20,"Customizable Profile":20}}},m=(r,n,o)=>{const c=x(r,n,o,d.basePrices);return b(c,n,o)},a=()=>{const{currentStep:r}=t;if(e.steps.forEach((n,o)=>n.classList.toggle("hidden",o!==r)),e.sidebarSteps.forEach((n,o)=>n.classList.toggle("active",o===r)),e.mobileStepIndicator){const n=Math.min(r+1,4);e.mobileStepIndicatorText.textContent=`STEP ${n}`,e.mobileStepIndicator.classList.toggle("hidden",r>=4)}},i=()=>{const{plan:r,billing:n,currency:o}=t.formData;e.planBoxes.forEach(c=>{const u=c.dataset.plan;c.classList.toggle("is-selected",u===r),e.get(c,"p.has-text-grey").textContent=m(u,n,o);let l=e.get(c,".free-label");n==="yearly"?l||e.get(c,"div").insertAdjacentHTML("beforeend",'<p class="is-size-7 has-text-link free-label">2 months free</p>'):l&&l.remove()})},y=()=>{const{billing:r,currency:n,addons:o}=t.formData;e.addonRows.forEach(c=>{const u=c.dataset.addon,l=o.some(f=>f.name===u);c.classList.toggle("is-selected",l),e.get(c,'input[type="checkbox"]').checked=l,e.get(c,"p.has-text-primary").textContent=`+${m(u,r,n)}`})},v=()=>{const{plan:r,billing:n,currency:o,addons:c}=t.formData,u=n==="monthly"?"Monthly":"Yearly";let l=x(r,n,o,d.basePrices),f=`
            <div class="is-flex is-justify-content-space-between is-align-items-center mb-4 pb-4" style="border-bottom: 1px solid #dbdbdb;">
                <div>
                    <p class="has-text-weight-bold">${r} (${u})</p>
                    <a href="#" class="is-size-7 has-text-grey" style="text-decoration: underline;" id="change-plan">Change</a>
                </div>
                <p class="has-text-weight-bold">${b(l,n,o)}</p>
            </div>
        `;c.forEach(p=>{const h=x(p.name,n,o,d.basePrices);l=l!==null&&h!==null?l+h:null,f+=`
                <div class="is-flex is-justify-content-space-between mb-2">
                    <p class="has-text-grey is-size-7">${p.name}</p>
                    <p class="is-size-7">+${b(h,n,o)}</p>
                </div>
            `}),e.summaryBox.innerHTML=f,e.totalRow.innerHTML=`
            <p class="has-text-grey is-size-7">Total (per ${n==="monthly"?"month":"year"})</p>
            <p class="has-text-primary is-size-4 has-text-weight-bold">+${b(l,n,o)}</p>
        `},D=()=>{let r=!0;return Object.entries(e.inputs).forEach(([n,o])=>{const c=e.closest(o,".field"),u=e.get(c,".help.is-danger");u&&u.remove(),o.classList.remove("is-danger");const l=o.value.trim();l?n==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)&&(B(o,"The email address is not formatted correctly"),r=!1):(B(o,"This field is required"),r=!1)}),r&&(t.formData.name=e.inputs.name.value,t.formData.email=e.inputs.email.value,t.formData.phone=e.inputs.phone.value),r},B=(r,n)=>{r.classList.add("is-danger"),e.closest(r,".field").insertAdjacentHTML("beforeend",`<p class="help is-danger">${n}</p>`)};e.container.addEventListener("click",r=>{const n=r.target,o=e.closest(n,".button.primary, .button.is-primary"),c=e.closest(n,".button.is-text"),u=n.id==="change-plan",l=e.closest(n,".plan-box"),f=e.closest(n,".addon-row");if(o){if(t.currentStep===0&&!D())return;t.currentStep<e.steps.length-1&&(t.currentStep=o.textContent.trim()==="Confirm"?4:t.currentStep+1);return}if(c&&t.currentStep>0){t.currentStep--;return}if(u){r.preventDefault(),t.currentStep=1;return}if(l){t.formData.plan=l.dataset.plan,s();return}if(f){const p=e.get(f,'input[type="checkbox"]');n!==p&&(p.checked=!p.checked);const h=f.dataset.addon;p.checked?t.formData.addons.some(L=>L.name===h)||t.formData.addons.push({name:h}):t.formData.addons=t.formData.addons.filter(L=>L.name!==h),s()}}),e.billingToggle.addEventListener("change",()=>{t.formData.billing=e.billingToggle.checked?"yearly":"monthly";const r=t.formData.billing==="yearly";e.yearlyLabel.classList.toggle("has-text-weight-bold",r),e.yearlyLabel.classList.toggle("has-text-grey",!r),e.monthlyLabel.classList.toggle("has-text-weight-bold",!r),e.monthlyLabel.classList.toggle("has-text-grey",r),s()}),e.currencySelector.addEventListener("change",()=>{t.formData.currency=e.currencySelector.value,t.formData.currency!==g.baseCurrency?E(()=>s(),()=>{t.formData.currency="GBP",e.currencySelector.value="GBP",s();const r=e.closest(e.currencySelector,".control"),n=e.create("div");n.className="currency-tooltip",n.textContent="Sorry, currency unavailable.",r.appendChild(n),setTimeout(()=>{n.remove(),Array.from(e.currencySelector.options).forEach(o=>{o.value!=="GBP"&&(o.disabled=!0)})},3e3)}).then(r=>{}):s()});const S=()=>{e.settingsModal.classList.toggle("is-active")};e.settingsCog.addEventListener("click",S),e.modalBackground.addEventListener("click",S),e.modalDelete.addEventListener("click",S),e.testModeToggle.addEventListener("change",()=>{e.toggleBodyClass("test-mode-enabled",e.testModeToggle.checked)}),e.testErrorBtn.addEventListener("click",()=>{const r=g.baseCurrency;g.baseCurrency="INVALID",E(()=>{},()=>{}).finally(()=>{g.baseCurrency=r})}),e.resetBtn.addEventListener("click",()=>{window.location.reload()}),s()});
